{% macro render_sidebar_items(menus, request, badge='') %}

    <nav class="collapse bd-links" id="bd-docs-nav">
    {% for menu in menus %}
        {{ render_sidebar_item(menu,request) }}
    {% endfor %}
    </nav>
{% endmacro %}

{% macro render_sidebar_item(menu, request, badge='') %}
    {% if menu %}
    <div class="bd-toc-item">
        <a class="bd-toc-link" {% if menu.endpoint %} href="{{ url(menu.endpoint, **kwargs) }}" {% elif menu.submenu %} href="{{ url(menu.submenu[0].endpoint, **kwargs) }}" {% endif %}>
        {{ menu.text }}
      </a>
        {% if menu.submenu %}
            <ul class="nav bd-sidenav">
            {% for sub in menu.submenu %}
                <li class="active bd-sidenav-active">
                    <a href="{{ url(sub.endpoint, **kwargs) }}">
                      sub.text
                    </a>
                </li>
            {% endfor %}
            </ul>
        {% endif %}
    </div>
    {% endif %}
{% endmacro %}